<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Jujutsu: Lobby & Gacha System</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; text-align: center; }
        .scene { display: none; width: 800px; height: 550px; margin: 20px auto; border: 4px solid #333; position: relative; background: #111; }
        .active { display: block; }
        
        /* ãƒ­ãƒ“ãƒ¼ */
        #lobby { background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=800'); background-size: cover; }
        .menu-btn { padding: 15px 30px; margin: 10px; font-size: 20px; cursor: pointer; background: #e74c3c; color: white; border: none; border-radius: 5px; }

        /* ã‚¬ãƒãƒ£ */
        #gacha-display { font-size: 80px; margin-top: 100px; min-height: 120px; }
        
        /* ç·¨æˆ */
        .character-list { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; padding: 20px; }
        .char-card { border: 2px solid #444; padding: 10px; cursor: pointer; background: #222; }
        .char-card.selected { border-color: #00d4ff; background: #003344; }
        
        /* å…±é€šUI */
        .back-btn { position: absolute; top: 10px; left: 10px; padding: 5px 15px; background: #555; border: none; color: white; cursor: pointer; }
    </style>
</head>
<body>

    <div id="scene-lobby" class="scene active">
        <h1>å‘ªè¡“é«˜å°‚ãƒ­ãƒ“ãƒ¼</h1>
        <div style="margin-top: 150px;">
            <button class="menu-btn" onclick="changeScene('scene-gacha')">ã‚¬ãƒãƒ£ã‚’å¼•ã</button>
            <button class="menu-btn" onclick="changeScene('scene-party')">ãƒãƒ¼ãƒ ç·¨æˆ</button>
            <button class="menu-btn" style="background:#2ecc71;" onclick="alert('ãƒãƒˆãƒ«ã¸GOï¼')">ä»»å‹™é–‹å§‹</button>
        </div>
    </div>

    <div id="scene-gacha" class="scene">
        <button class="back-btn" onclick="changeScene('scene-lobby')">æˆ»ã‚‹</button>
        <h2>ç‰¹ç´šç¥ˆå¿µã‚¬ãƒãƒ£</h2>
        <div id="gacha-display">ï¼Ÿ</div>
        <button class="menu-btn" onclick="pullGacha()">1å›å¼•ã (å‘ªåŠ›æ¶ˆè²»)</button>
    </div>

    <div id="scene-party" class="scene">
        <button class="back-btn" onclick="changeScene('scene-lobby')">æˆ»ã‚‹</button>
        <h2>ãƒãƒ¼ãƒ ç·¨æˆ (3äººé¸ã‚“ã§ãã ã•ã„)</h2>
        <div id="my-characters" class="character-list">
            </div>
        <div id="party-info">é¸æŠä¸­: 0 / 3</div>
    </div>

<script>
    // --- ãƒ‡ãƒ¼ã‚¿ç®¡ç† ---
    const allChars = [
        { id: 'itadori', name: 'è™æ–', emoji: 'ğŸ¤œ', rare: 'SR' },
        { id: 'fushiguro', name: 'ä¼é»’', emoji: 'ğŸº', rare: 'SR' },
        { id: 'gojo', name: 'äº”æ¡', emoji: 'ğŸ˜', rare: 'SSR' },
        { id: 'nanami', name: 'ä¸ƒæµ·', emoji: 'ğŸ“', rare: 'SR' },
        { id: 'kugisaki', name: 'é‡˜å´', emoji: 'ğŸ”¨', rare: 'SR' },
        { id: 'todo', name: 'æ±å ‚', emoji: 'ğŸ’ª', rare: 'SR' }
    ];

    let myInventory = ['itadori']; // æœ€åˆã‹ã‚‰æŒã£ã¦ã„ã‚‹ã‚­ãƒ£ãƒ©
    let myParty = [];

    // --- ã‚·ãƒ¼ãƒ³åˆ‡ã‚Šæ›¿ãˆ ---
    function changeScene(sceneId) {
        document.querySelectorAll('.scene').forEach(s => s.classList.remove('active'));
        document.getElementById(sceneId).classList.add('active');
        if(sceneId === 'scene-party') renderParty();
    }

    // --- ã‚¬ãƒãƒ£ãƒ­ã‚¸ãƒƒã‚¯ ---
    function pullGacha() {
        const result = allChars[Math.floor(Math.random() * allChars.length)];
        document.getElementById('gacha-display').innerText = result.emoji;
        
        if (!myInventory.includes(result.id)) {
            myInventory.push(result.id);
            alert(`æ–°ã‚­ãƒ£ãƒ©ç²å¾—ï¼: ${result.name} (${result.rare})`);
        } else {
            alert(`${result.name} ãŒè¢«ã‚Šã¾ã—ãŸã€‚`);
        }
    }

    // --- ç·¨æˆãƒ­ã‚¸ãƒƒã‚¯ ---
    function renderParty() {
        const listEl = document.getElementById('my-characters');
        listEl.innerHTML = '';
        
        myInventory.forEach(charId => {
            const charData = allChars.find(c => c.id === charId);
            const card = document.createElement('div');
            card.className = `char-card ${myParty.includes(charId) ? 'selected' : ''}`;
            card.innerHTML = `<div style="font-size:30px">${charData.emoji}</div><div>${charData.name}</div>`;
            card.onclick = () => toggleParty(charId);
            listEl.appendChild(card);
        });
        document.getElementById('party-info').innerText = `é¸æŠä¸­: ${myParty.length} / 3`;
    }

    function toggleParty(charId) {
        if (myParty.includes(charId)) {
            myParty = myParty.filter(id => id !== charId);
        } else {
            if (myParty.length < 3) myParty.push(charId);
            else alert("ãƒãƒ¼ãƒ ã¯3äººã¾ã§ã§ã™ï¼");
        }
        renderParty();
    }
</script>
</body>
</html>
